@tailwind base;

/** color */
@layer base {
  /** light theme */
  :root[color-theme*='light'] {
    --black: #222;
    --white: #fff;
    --green-dark: #365314;
    --green-darker: #4d7c0f;
    --green-main: #84cc16;
    --green-brighter: #a3e635;
    --green-bright: #d9f99d;
    --yellow: #fffa82;
    --gray-main: #b7b7b7;
    --gray-darker: #777;
    --blue-main: #0969da;
    --blue-bright: #54aeff;
    --blue-darker: #033d8b;
    --strong: var(--black);
    --strong-callout: var(--black);
    --bg-thead: #f2f2f2;
    --bg-callout: rgb(187, 250, 203, 0.5);
    --border-table: #ddd;

    accent-color: var(--green-main);
  }

  /** dark theme */
  :root[color-theme*='dark'] {
    --black: #efefef;
    --white: #222;
    --green-dark: #d9f99d;
    --green-darker: #a3e635;
    --green-main: #84cc16;
    --green-brighter: #4d7c0f;
    --green-bright: #365314;
    --yellow: #fffa82;
    --gray-main: #b7b7b7;
    --gray-darker: #777;
    --blue-darker: #0969da;
    --blue-main: #54aeff;
    --blue-bright: #94ccfd;
    --strong: var(--green-bright);
    --strong-callout: var(--black);
    --bg-thead: #393939;
    --bg-callout: rgba(16, 77, 31, 0.5);
    --border-table: #191919;

    accent-color: var(--green-main);
  }
}

/** layout */
@layer base {
  html {
    display: block;
    padding: 0;
    width: 100%;
    height: 100vh;
    color: var(--black);
    background-color: var(--white);
    line-height: 180%;

    font-family:
      'Pretendard Variable',
      Pretendard,
      -apple-system,
      BlinkMacSystemFont,
      Tossface,
      system-ui,
      Roboto,
      'Helvetica Neue',
      'Segoe UI',
      'Apple SD Gothic Neo',
      'Noto Sans KR',
      'Malgun Gothic',
      'Apple Color Emoji',
      'Segoe UI Emoji',
      'Segoe UI Symbol',
      sans-serif;
    /* Blocked IOS touch interactions */
    -webkit-tap-highlight-color: transparent;

    /* Hidden Scrollbar */
    -ms-overflow-style: none;
    scrollbar-width: none;

    /* Blocked Drag */
    -webkit-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
    user-select: text;
  }

  body {
    scroll-behavior: smooth;
    box-sizing: border-box;
    width: 100%;
    margin: 0 auto;
  }

  /* Hidden Scrollbar */
  html::-webkit-scrollbar,
  body::-webkit-scrollbar {
    display: none;
  }

  /* Drag Selection */
  ::selection {
    background-color: var(--green-bright);
    color: #333;
  }

  ::-moz-selection {
    background-color: var(--green-bright);
    color: #333;
  }

  input {
    outline: 0;
    border: 0;
  }
}

/** font */
@layer base {
  h1 {
    @apply text-3xl max-md:text-2xl font-bold break-keep;
  }

  h2 {
    @apply text-2xl max-md:text-xl font-semibold break-keep;
  }

  h3 {
    @apply text-xl max-md:text-base font-semibold break-keep;
  }

  p {
    @apply text-base max-md:text-sm break-keep;
  }

  span {
    @apply text-xs break-keep;
  }
}

/** layout */
@layer base {
  .layout-all {
    @apply layout-border layout-hover-pure layout-rounded layout-bg layout-text layout-text-color;
  }

  .layout-hover {
    @apply hover:border-green-darker dark:hover:border-green-bright layout-hover-pure;
  }

  .layout-hover-pure {
    @apply hover:cursor-pointer hover:bg-gray-50 dark:hover:bg-[#1a1a1a] transition-colors duration-200;
  }

  .layout-rounded {
    @apply rounded-md max-md:rounded-sm;
  }

  .layout-bg {
    @apply bg-white dark:bg-black;
  }

  .layout-text {
    @apply text-base max-md:text-xs font-light;
  }

  .layout-text-color {
    @apply text-black dark:text-white;
  }

  .layout-border {
    @apply border-[1px] layout-border-color;
  }

  .layout-border-color {
    @apply border-gray-200 duration-200 transition-colors hover:border-gray-300 dark:border-gray-600 dark:hover:border-gray-400;
  }
}

/** markdown-body */
@layer base {
  .markdown-body {
    h1 {
      @apply pt-16;
    }

    h2 {
      @apply pt-12;
    }

    h3 {
      position: relative;
      width: max-content;
      z-index: 2;

      @apply pt-8;
    }

    h3:after {
      content: '';
      position: absolute;
      width: 100%;
      left: 0%;
      background-color: var(--green-main);
      opacity: 50%;
      z-index: 1;

      @apply py-1 mt-5 max-md:mt-4;
    }

    /* code */
    :not(pre[class*='language-']) code {
      @apply bg-gray-200 dark:bg-[#111] font-bold layout-text-color tracking-tight;
    }

    p {
      @apply pt-5 leading-relaxed;

      strong {
        position: relative;
        width: max-content;
        z-index: 2;
      }

      strong:after {
        content: '';
        position: absolute;
        width: 100%;
        left: 0%;
        background-color: var(--green-main);
        opacity: 50%;
        z-index: 1;

        @apply py-0.5 pt-0.5 mt-5 max-md:mt-4;
      }
    }

    hr {
      @apply mt-8 pb-8;
    }

    details {
      @apply pb-4;
    }

    summary {
      ~ * {
        @apply pt-0 pl-4;
      }
    }

    table {
      @apply mt-8;
    }

    ul {
      @apply pt-8;

      list-style-type: disc;
      padding-left: 1rem;

      li {
        padding-left: 0.35rem;
        line-height: 200%;

        &::marker {
          color: var(--gray-darker);
        }

        ul {
          @apply pt-0;
        }
      }
    }

    ol {
      @apply pt-8;

      list-style-type: decimal;
      padding-left: 1rem;

      li {
        padding-left: 0.35rem;
        line-height: 200%;

        &::marker {
          color: var(--gray-darker);
        }
      }
    }

    blockquote {
      @apply bg-green-bright dark:bg-green-dark layout-rounded p-4 mt-8;

      p {
        @apply pt-0;

        > strong:after {
          display: none;
        }
      }
    }

    /* code snippets */
    pre[class*='language-'] {
      overflow-x: scroll;
      overflow-y: hidden;
      white-space: nowrap;

      @apply mt-8 rounded-lg max-md:rounded-md;
    }

    /* scrollbar */
    ::-webkit-scrollbar {
      height: 4px; /* 스크롤바의 너비 */
    }

    ::-webkit-scrollbar-track {
      background: var(--green-dark); /* 스크롤바 트랙의 배경색 */
    }

    ::-webkit-scrollbar-thumb {
      background: var(--green-bright); /* 스크롤바 썸의 배경색 */
      border-radius: 10px; /* 스크롤바 썸의 모서리를 둥글게 만듭니다 */
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--gray-main); /* 스크롤바 썸에 마우스를 올려놓았을 때의 배경색 */
    }

    img {
      @apply mt-8 mx-auto w-full rounded-3xl max-md:rounded-xl;
    }

    div[class='image-caption'] {
      @apply text-sm max-md:text-xs py-1 text-gray-500 dark:text-gray-300 font-light mx-auto w-full text-center;
    }
  }
}
